flowchart TD
  subgraph GH["GitHub"]
        GHR["GitHub Repositories"]
        GHA["GitHub Actions\nCI/CD Pipelines"]
  end
  subgraph WEB["Web"]
        SWA["Azure Static Web App"]
        WebFrontend["Web Frontend"]
  end
  subgraph GW["API Gateway"]
        AppService1["Azure App Service"]
        APIGateway["API Gateway"]
  end
  subgraph APP["Application"]
    subgraph CoreServices["Core Services"]
        AuthService["Auth Service"]
        CampaignService["Campaign Service"]
        FraudService["Fraud Service"]
        PaymentService["Payment Service"]
    end
    AppService2["Azure App Service"]
  end
  subgraph Data["Data Layer"]
        SQLDB["Azure SQL Database"]
        Storage["Firebase Storage"]
  end
  subgraph External["External Services"]
        VNPayGateway["VNPay Payment System"]
        GoogleAuthAPI["Google Authentication API"]
  end
    GHR --> GHA
    GHA --> SWA & AppService1 & AppService2
    SWA --> WebFrontend
    WebFrontend --> APIGateway
    AppService1 --> APIGateway
    APIGateway --> CoreServices
    AppService2 --> CoreServices
    CoreServices --> SQLDB & Storage
    AuthService --> GoogleAuthAPI
    PaymentService --> VNPayGateway

    GHR:::github
    GHA:::github
    SWA:::azure
    WebFrontend:::app
    AppService1:::azure
    APIGateway:::app
    AuthService:::service
    CampaignService:::service
    FraudService:::service
    PaymentService:::service
    AppService2:::azure
    SQLDB:::azure
    Storage:::azure
    VNPayGateway:::ext
    GoogleAuthAPI:::ext
    classDef azure fill:#0078D7,color:white,stroke:#0078D7,stroke-width:2px
    classDef app fill:#00A88F,color:white,stroke:#00A88F,stroke-width:2px
    classDef ext fill:#D83B01,color:white,stroke:#D83B01,stroke-width:2px
    classDef github fill:#333333,color:white,stroke:#333333,stroke-width:2px
    classDef service fill:#8661C5,color:white,stroke:#8661C5,stroke-width:2px